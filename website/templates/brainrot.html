{% extends "base.html" %} {% block title %}brainrot{% endblock %} {% block content
    %}
   
    <!-- Container for the full-screen video feed -->
    <div class="video-container">
        <!-- Enables vertical scrolling between videos -->
        <div class="video-scroller">
            <!-- Individual video item container -->
            <div class="video-item">
                <!-- First video wrapper -->
                <div class="video-wrapper">
                    <blockquote class="tiktok-embed" 
                        cite="https://www.tiktok.com/scivinhtific/video/7470380143547108638"
                        data-video-id="7470380143547108638">
                        <section></section>
                    </blockquote>
                    <script async src="https://www.tiktok.com/embed.js"></script>
                </div>
            </div>
            </div>
        </div>
    </div>

    <style>
        /* Full width/height container for video feed */
        .video-container {
            width: 100%;
            height: 100vh;
            overflow: hidden;
        }

        /* Enables smooth scrolling between videos */
        .video-scroller {
            height: 100%;
            overflow-y: scroll; /*enables vertical scrolling*/
            scroll-snap-type: y mandatory;
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;     /* Firefox */
        }

    /* Hide scrollbar for Chrome, Safari and Opera */
    .video-scroller::-webkit-scrollbar {
        display: none;
        }

        /* Individual video container styling */
        .video-item {
            height: 100vh;
            scroll-snap-align: start; /*snaps to the top of video*/
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        /* Video wrapper to maintain aspect ratio and centering */
        .video-wrapper {
            width: 100%;
            max-width: 600px;
            height: 100%;
            max-height: 889px;
            background: #ffffff;
            display: flex;
            justify-content: center;
            align-items: center;
        }
    </style>


    <!-- script to add embedded tiktok videos, using a for loop does not work, a new blockquote has to be generated for each video -->
     <!-- add a new video by doing addTikTokVideo(url id) -->  
    <!-- gets a preshuffled dictionary of videos from views.py -->

    <script>
        function addTikTokVideo(videoUrl, videoId) {
            const videoScroller = document.querySelector('.video-scroller');
            
            // Create the HTML structure
            const videoItem = document.createElement('div');
            videoItem.className = 'video-item';
            
            const videoWrapper = document.createElement('div');
            videoWrapper.className = 'video-wrapper';
            
            const blockquote = document.createElement('blockquote');
            blockquote.className = 'tiktok-embed';
            blockquote.setAttribute('cite', videoUrl);
            blockquote.setAttribute('data-video-id', videoId);
            
            const section = document.createElement('section');
            blockquote.appendChild(section);
            
            // Assemble the structure
            videoWrapper.appendChild(blockquote);
            videoItem.appendChild(videoWrapper);
            videoScroller.appendChild(videoItem);
            
            // Load TikTok embed script
            const script = document.createElement('script');
            script.src = 'https://www.tiktok.com/embed.js';
            script.async = true;
            videoWrapper.appendChild(script);
        }
        //tried doing for loop here does not work 
        addTikTokVideo('https://www.tiktok.com/{{videos[0].username}}/video/{{videos[0].id}}', '{{videos[0].id}}');
        addTikTokVideo('https://www.tiktok.com/{{videos[1].username}}/video/{{videos[1].id}}', '{{videos[1].id}}');
        addTikTokVideo('https://www.tiktok.com/{{videos[2].username}}/video/{{videos[2].id}}', '{{videos[2].id}}');
        addTikTokVideo('https://www.tiktok.com/{{videos[3].username}}/video/{{videos[3].id}}', '{{videos[3].id}}');
        addTikTokVideo('https://www.tiktok.com/{{videos[4].username}}/video/{{videos[4].id}}', '{{videos[4].id}}');
        addTikTokVideo('https://www.tiktok.com/{{videos[5].username}}/video/{{videos[5].id}}', '{{videos[5].id}}');
        addTikTokVideo('https://www.tiktok.com/{{videos[6].username}}/video/{{videos[6].id}}', '{{videos[6].id}}');
        addTikTokVideo('https://www.tiktok.com/{{videos[7].username}}/video/{{videos[7].id}}', '{{videos[7].id}}');
        addTikTokVideo('https://www.tiktok.com/{{videos[8].username}}/video/{{videos[8].id}}', '{{videos[8].id}}');
        addTikTokVideo('https://www.tiktok.com/{{videos[9].username}}/video/{{videos[9].id}}', '{{videos[9].id}}');
        addTikTokVideo('https://www.tiktok.com/{{videos[10].username}}/video/{{videos[10].id}}', '{{videos[10].id}}');
        addTikTokVideo('https://www.tiktok.com/{{videos[11].username}}/video/{{videos[11].id}}', '{{videos[11].id}}');
        addTikTokVideo('https://www.tiktok.com/{{videos[12].username}}/video/{{videos[12].id}}', '{{videos[12].id}}');
        addTikTokVideo('https://www.tiktok.com/{{videos[13].username}}/video/{{videos[13].id}}', '{{videos[13].id}}');
        addTikTokVideo('https://www.tiktok.com/{{videos[14].username}}/video/{{videos[14].id}}', '{{videos[14].id}}');
        addTikTokVideo('https://www.tiktok.com/{{videos[15].username}}/video/{{videos[15].id}}', '{{videos[15].id}}');
        addTikTokVideo('https://www.tiktok.com/{{videos[16].username}}/video/{{videos[16].id}}', '{{videos[16].id}}');
        addTikTokVideo('https://www.tiktok.com/{{videos[17].username}}/video/{{videos[17].id}}', '{{videos[17].id}}');
        addTikTokVideo('https://www.tiktok.com/{{videos[18].username}}/video/{{videos[18].id}}', '{{videos[18].id}}');
        addTikTokVideo('https://www.tiktok.com/{{videos[19].username}}/video/{{videos[19].id}}', '{{videos[19].id}}');
        addTikTokVideo('https://www.tiktok.com/{{videos[20].username}}/video/{{videos[20].id}}', '{{videos[20].id}}');
        addTikTokVideo('https://www.tiktok.com/{{videos[21].username}}/video/{{videos[21].id}}', '{{videos[21].id}}');
        addTikTokVideo('https://www.tiktok.com/{{videos[22].username}}/video/{{videos[22].id}}', '{{videos[22].id}}');
        addTikTokVideo('https://www.tiktok.com/{{videos[23].username}}/video/{{videos[23].id}}', '{{videos[23].id}}');
        addTikTokVideo('https://www.tiktok.com/{{videos[24].username}}/video/{{videos[24].id}}', '{{videos[24].id}}');
        addTikTokVideo('https://www.tiktok.com/{{videos[25].username}}/video/{{videos[25].id}}', '{{videos[25].id}}');
        addTikTokVideo('https://www.tiktok.com/{{videos[26].username}}/video/{{videos[26].id}}', '{{videos[26].id}}');
        addTikTokVideo('https://www.tiktok.com/{{videos[27].username}}/video/{{videos[27].id}}', '{{videos[27].id}}');
        addTikTokVideo('https://www.tiktok.com/{{videos[28].username}}/video/{{videos[28].id}}', '{{videos[28].id}}');
        addTikTokVideo('https://www.tiktok.com/{{videos[29].username}}/video/{{videos[29].id}}', '{{videos[29].id}}');
        addTikTokVideo('https://www.tiktok.com/{{videos[30].username}}/video/{{videos[30].id}}', '{{videos[30].id}}');
        addTikTokVideo('https://www.tiktok.com/{{videos[31].username}}/video/{{videos[31].id}}', '{{videos[31].id}}');
        addTikTokVideo('https://www.tiktok.com/{{videos[32].username}}/video/{{videos[32].id}}', '{{videos[32].id}}');
        addTikTokVideo('https://www.tiktok.com/{{videos[33].username}}/video/{{videos[33].id}}', '{{videos[33].id}}');
        addTikTokVideo('https://www.tiktok.com/{{videos[34].username}}/video/{{videos[34].id}}', '{{videos[34].id}}');
        addTikTokVideo('https://www.tiktok.com/{{videos[35].username}}/video/{{videos[35].id}}', '{{videos[35].id}}');


    </script>

    {% endblock %}